chatbot.py - библиотека для разработки чатботов (сейчас это только телеграмм, но задумка была сделать общую библиотеку для всех мессенджеров)
# Архитектура бота
Взаимодействие с ботом построено на создании "обработчиков", регистрируемых в боте с помощью декоратора. Кроме того, бот позволяет направить сообщение пользователю немедленно или с отсрочкой по времени. 

Обработчики деляться на несколько типов
- обработчик ответа (когда пользователь что-то написал боту вызывется этот обработчик)
- обработчик ожидания (когда бот написал пользователю и ждет от него ответа, у него есть таймаут (после которого вызывается обработчки ожидания)). 

Для хранения состояний, отложенных сообщений и информации о пользователях используется база данных на mongo.

# Классы
- Bot - основной класс
- SessionStore - хранилище данных. Используется чтобы скрыть реализацию взаимодействия с БД на случай замены движка
- MessageHandler - обработчик ответа. создается с помощью декоратора или используя метод бота register_message_handler
- EventHandler - обработчик ожадния. создается с помощью декоратора или используя метод бота register_event_handler
- Message - сообщение от пользователя. помимо данных из сообщения он обогощается связью с пользователем
- User - пользователь. к пользователю привязывается контекст и данные

## Bot
- __init__() - конструктор объекта
    - token - токен бота
    - session_store = None - хранилище данных, если не передается создается собственное
    - skip_pending = True - игнорировать пропущенные сообщения
- send_message() - отправить сообщение пользователю
    - chat_id - идентификатор пользователя (чата)
    - message - текст сообщения
    - new_stage - если сообщение отправлено - диалог перейдет в это состояние
    - new_stage_ttl - срок жизни нового состояния. если не установлен - состояние живет сутки
    - reply_markup - клавиатура для ответа пользователем, можно собрать руками, но проще с помощью класса ReplyKeyboard
- start() - запустить бота
- stop() - остановить бота
@bot.register_event_handler(states=None, events=None):=>stop - обработчик сообщения от пользователя
    def do_something(message)    
@bot.register_message_handler(self, commands=None, regexp=None, func=None, states=None, content_types=['text'])=>stop - обработчик ожидания
    def do_something(event)    

